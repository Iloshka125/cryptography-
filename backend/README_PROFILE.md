# API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í–∫–ª—é—á–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è, –∞–≤–∞—Ç–∞—Ä–æ–º, —É—Ä–æ–≤–Ω–µ–º –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î

### –¢–∞–±–ª–∏—Ü–∞ users
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
- `avatar` VARCHAR(10) DEFAULT 'üéØ' - –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—ç–º–æ–¥–∑–∏)
- `level` INTEGER DEFAULT 1 - —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `updated_at` TIMESTAMP - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –¢–∞–±–ª–∏—Ü–∞ user_achievements
–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:
```sql
CREATE TABLE user_achievements (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  achievement_id INTEGER NOT NULL,
  unlocked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(user_id, achievement_id)
);
```

## API Endpoints

### 1. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**POST** `/profile/get`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": 1
}
```
–∏–ª–∏
```json
{
  "email": "user@example.com"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "profile": {
    "id": 1,
    "nickname": "CyberHacker",
    "email": "user@example.com",
    "phone": "+79281716796",
    "avatar": "üéØ",
    "level": 7,
    "balance": {
      "coins": 1000,
      "hints": 5
    },
    "achievements": [
      {
        "id": 1,
        "unlocked": true,
        "unlocked_at": "2024-01-15T10:30:00Z"
      },
      ...
    ]
  }
}
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
**POST** `/profile/update`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": 1,
  "nickname": "NewNickname",
  "email": "newemail@example.com",
  "phone": "+79281716796",
  "avatar": "üëë"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "profile": {
    "id": 1,
    "nickname": "NewNickname",
    "email": "newemail@example.com",
    "phone": "+79281716796",
    "avatar": "üëë",
    "level": 7
  }
}
```

### 3. –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
**POST** `/profile/change-password`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": 1,
  "old_password": "oldpass123",
  "new_password": "newpass123"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω"
}
```

### 4. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
**POST** `/profile/unlock-achievement`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": 1,
  "achievement_id": 1
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "achievement": {
    "id": 1,
    "unlocked": true
  }
}
```

## –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

–î–æ—Å—Ç—É–ø–Ω—ã–µ ID –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:
- 1: –ü–µ—Ä–≤—ã–π —à–∞–≥ - –ó–∞–≤–µ—Ä—à–∏—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å
- 2: –ú–∞—Å—Ç–µ—Ä —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è - –ó–∞–≤–µ—Ä—à–∏—Ç–µ 10 —É—Ä–æ–≤–Ω–µ–π
- 3: –õ–µ–≥–µ–Ω–¥–∞ - –ó–∞–≤–µ—Ä—à–∏—Ç–µ –≤—Å–µ —É—Ä–æ–≤–Ω–∏
- 4: –ë—ã—Å—Ç—Ä—ã–π —É—á–µ–Ω–∏–∫ - –ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –∑–∞ 5 –º–∏–Ω—É—Ç
- 5: –ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä - –°–æ–±–µ—Ä–∏—Ç–µ 100 –º–æ–Ω–µ—Ç
- 6: –°–æ—Ü–∏–∞–ª—å–Ω—ã–π - –î–æ–±–∞–≤—å—Ç–µ 10 –¥—Ä—É–∑–µ–π

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è:
  - –ê–≤–∞—Ç–∞—Ä: 'üéØ' (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - –£—Ä–æ–≤–µ–Ω—å: 1
  - –ë–∞–ª–∞–Ω—Å: 1000 –º–æ–Ω–µ—Ç, 5 –ø–æ–¥—Å–∫–∞–∑–æ–∫

